<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">

  <title>Product ‚Äî AKC Auto Parts</title>
  <link rel="icon" type="image/png" href="https://th.bing.com/th/id/R.35647c0cec927537fa43ed1836a446c2?rik=7Lzu71WwPczowA&riu=http%3a%2f%2fpluspng.com%2fimg-png%2fhyundai-logo-png-hyundai-car-logo-png-brand-image-1749.png&ehk=UI8O%2bS7ci5lpalKI9Rf1u%2bMYvCgw%2bVwAeupMAcxmk2g%3d&risl=&pid=ImgRaw&r=0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/mobile-ui.css">
  </div>

  <style>
    :root{
      --bg: #ffffff
      --card: #ffffff;
      --muted:#6b7280;
      --accent:#0f1724; /* neutral dark for premium look */
      --accent-2:#ea580c; /* highlight */
      --success:#16a34a;
      --glass: rgba(255,255,255,0.6);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:  'Nunito Sans', Times, serif;
      background:var(--bg);
      color:var(--accent);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding:20px;
    }

    .container {
  width: 100%;
  max-width: 100%;
  margin: 0;
  display: grid;
  grid-template-columns: 1fr 420px;
  gap: 28px;
}

    @media(max-width: 1150px){ .container{ grid-template-columns: 1fr; padding:8px } }

    /* left (images + gallery + description) */
    .media {
      background:transparent;
      display:flex; flex-direction:column; gap:14px;
    }
    .hero {
      background:#3e788700;
      border-radius:12px;
      padding:0px;
      box-shadow:0 8px 30px rgba(15,23,42,0.06);
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:300px;
      position:relative;
      overflow:hidden;
    }
    .hero img{
      max-width:100%;
      max-height:550px;
      object-fit:contain;
      transition:transform .25s ease;
      cursor:zoom-in;
    }
    /* zoom on hover */
    .hero:hover img{ transform:scale(1.06); }

    .thumbs {
      display:flex; gap:8px; margin-top:6px; flex-wrap:wrap;
    }
    .thumbs button{
      width:72px; height:56px; border-radius:8px; border:1px solid #e6e9ef; background:#fff;
      display:inline-flex; align-items:center; justify-content:center; padding:4px; cursor:pointer;
    }
    .thumbs img{ width:100%; height:100%; object-fit:cover; border-radius:6px; }

    /* right (meta & actions) */
    .meta {
      background:var(--card);
      border-radius:12px;
      padding:20px;
      box-shadow:0 8px 30px rgba(15,23,42,0.06);
      display:flex; 
      flex-direction:column;
      gap:12px;
      height:fit-content;
      width : 1150px;
    }
    .brand-row{ display:flex; gap:10px; align-items:center; }
    .brand-row img{ height:34px; width:auto; border-radius:6px; object-fit:contain; }
    .title{ font-size:22px; font-weight:700; margin:0; letter-spacing:0.2px; color:var(--accent); }
    .subline{ color:var(--muted); font-size:14px; }

    .price-row{ display:flex; gap:12px; align-items:center; margin-top:6px; }
    .price{ font-size:26px; font-weight:800; color:var(--accent-2); }
    .old-price{ text-decoration:line-through; color:var(--muted); font-size:14px; }
    .stock{ padding:6px 10px; border-radius:999px; font-weight:700; font-size:13px; color:#fff; background:var(--success); }

    .rating { display:flex; gap:8px; align-items:center; }
    .stars { display:flex; gap:4px; }
    .star{ font-size:18px; color:#f59e0b; cursor:pointer; opacity:0.95; }

    .qty-row{ display:flex; gap:10px; align-items:center; margin-top:12px; }
    .qty { display:flex; gap:8px; align-items:center; border-radius:8px; overflow:hidden; border:1px solid #e6e9ef; }
    .qty button{ background:#fff; border:0; padding:10px 12px; cursor:pointer; font-weight:700; }
    .qty input{ width:56px; text-align:center; border:0; padding:8px; font-size:15px; }

    .cta { display:flex; gap:10px; margin-top:12px; }
    .btn { padding:12px 16px; border-radius:10px; cursor:pointer; border:0; font-weight:700; }
    .btn.cart{ background:var(--accent-2); color:#eae6e6; }
    .btn.full{ flex:1; }

    .meta small{ color:var(--muted) }

    /* description & specs */
    .details { margin-top:18px; background:var(--card); padding:18px; border-radius:12px; box-shadow:0 6px 18px rgba(2,6,23,0.03) }
    .details h4{ margin:0 0 8px 0; font-size:18px; }
    .specs{ width:100%; border-collapse:collapse; margin-top:8px; }
    .specs td{ padding:8px 10px; border-top:1px dashed #eef2f6; font-size:18px; color:var(--muted) }

    /* related */
    .related { margin-top:16px; display:flex; gap:10px; overflow:auto; padding-bottom:6px; }
    .rel-card{ min-width:170px; background:var(--card); padding:10px; border-radius:10px; box-shadow:0 6px 18px rgba(2,6,23,0.03); display:flex; flex-direction:column; gap:8px; align-items:center; }
    .rel-card img{ width:140px; height:90px; object-fit:cover; border-radius:8px; }

    /* messages */
   /* CENTER POPUP: Added to Cart */
#toast {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.8);
  padding: 16px 22px;
  background: #111827;  /* dark background */
  color: #fff;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
  z-index: 9999;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.35s ease, transform 0.35s ease;
}

#toast.show {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

/* ================================
   CUSTOMER REVIEW SECTION STYLING
   ================================= */

/* Section wrapper */
.review-section {
  margin-top: 40px;
  padding: 25px;
  background: var(--card);
  border-radius: 14px;
  box-shadow: 0 8px 30px rgba(15, 23, 42, 0.08);
  border: 1px solid #e5e7eb;
}

/* Title */
.review-section h3 {
  margin: 0 0 15px 0;
  font-size: 20px;
  font-weight: 800;
  color: var(--accent);
}

/* Review form textarea */
.review-textarea {
  width: 100%;
  height: 90px;
  padding: 12px;
  font-size: 15px;
  border-radius: 10px;
  border: 1px solid #d1d5db;
  background: #fafafa;
  transition: 0.25s ease;
  resize: none;
}

.review-textarea:focus {
  outline: none;
  background: #fff;
  border-color: var(--accent-2);
  box-shadow: 0 0 0 3px rgba(234, 88, 12, 0.15);
}

/* Submit button */
.review-submit-btn {
  padding: 10px 18px;
  border-radius: 10px;
  background: var(--accent-2);
  color: #fff;
  border: none;
  cursor: pointer;
  font-weight: 700;
  transition: 0.3s ease;
}

.review-submit-btn:hover {
  background: #c2410c;
  transform: translateY(-2px);
}

/* Review Cards */
.review-card {
  background: var(--card);
  padding: 16px;
  margin-bottom: 14px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 4px 16px rgba(0,0,0,0.06);
  transition: 0.25s ease;
}

.review-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.10);
}

/* Username */
.review-user {
  font-weight: 700;
  font-size: 16px;
  color: var(--accent);
}

/* Review message text */
.review-message {
  margin: 6px 0 10px 0;
  color: var(--muted);
  line-height: 1.5;
}

/* Date */
.review-date {
  font-size: 12px;
  color: #9ca3af;
}

/* Review stars (displayed) */
.review-stars {
  color: #fbbf24;
  font-size: 18px;
  margin-bottom: 5px;
}

/* Rating dropdown */
#reviewRating {
  padding: 8px;
  font-size: 14px;
  border-radius: 8px;
  border: 1px solid #d1d5db;
  cursor: pointer;
  transition: 0.2s ease;
}

#reviewRating:hover {
  border-color: var(--accent-2);
}

/* Interactive hover stars for input (if needed later) */
.star-input {
  font-size: 22px;
  cursor: pointer;
  transition: 0.2s ease;
}

.star-input:hover {
  transform: scale(1.2);
  color: #fbbf24;
}

/* Popup styling */
.popup-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.5);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 999;
}

.popup-box {
  background: #fff;
  padding: 20px;
  width: 350px;
  border-radius: 12px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.2);
  text-align: center;
}

.popup-box textarea {
  width: 100%;
  height: 80px;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 6px;
}

.popup-actions {
  display: flex;
  gap: 10px;
  margin-top: 12px;
}

.btn.secondary {
  background: #e5e7eb;
  color: #111;
}
.delivery-box {
  background: #f0fdf4;
  border: 1px solid #bbf7d0;
  padding: 10px 14px;
  border-radius: 12px;
  margin-top: 4px;
}

.free-delivery {
  margin: 0;
  font-weight: 700;
  color: #166534;
}

.delivery-date {
  margin: 0;
  color: #065f46;
  font-size: 14px;
}
.glass-header {
  width: 100%;
  max-width: 1150px;
  margin: 0 auto 22px;
  padding: 12px 20px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;

  background: rgba(255, 255, 255, 0.45);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  box-shadow: 0 8px 28px rgba(0,0,0,0.12);
}

.header-logo {
  height: 44px;
  border-radius: 8px;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 12px;
}

.brand-title {
  font-size: 20px;
  font-weight: 800;
  align-items: center;
}

.header-right {
  font-size: 14px;
  color: #4b5563;
}
.stock.green {
  background: #16a34a;
}

.stock.orange {
  background: #f97316;
}

.stock.red {
  background: #dc2626;
}

    /* sign-in prompt (center modal) */
    .modal-overlay{ position:fixed; inset:0; background:rgba(0,0,0,0.45); display:none; align-items:center; justify-content:center; z-index:9998; }
    .modal{ background:#fff; padding:22px; border-radius:12px; width:360px; max-width:90%; box-shadow:0 10px 30px rgba(2,6,23,0.2); text-align:center; }
    .modal h3{ margin:0 0 10px 0; }
    .modal .actions{ display:flex; gap:10px; margin-top:14px; justify-content:center; }
    .dot-indicators{display:flex; gap:8px; justify-content:center; margin-top:12px;}
    .dot{ width:10px; height:10px; border-radius:999px; background:#e6e9ef; cursor:pointer; transition:transform .15s ease, background .15s ease;}
    .dot.active{ background:var(--accent-2); transform:scale(1.15); box-shadow:0 4px 10px rgba(234,88,12,0.18);}
    
    /* ===============================
       MOBILE RESPONSIVE STYLES
       =============================== */
    
    @media(max-width:768px){
      body{
        padding:15px 10px;
      }
      
      .glass-header{
        padding:10px 15px;
        flex-wrap:wrap;
        gap:10px;
      }
      
      .header-logo{
        height:35px;
      }
      
      .brand-title{
        font-size:16px;
      }
      
      .header-right{
        font-size:12px;
        display:none;
      }
      
      .container{
        gap:20px;
      }
      
      .hero{
        min-height:220px;
      }
      
      .hero img{
        max-height:350px;
      }
      
      .meta{
        padding:16px;
      }
      
      .title{
        font-size:18px;
      }
      
      .price{
        font-size:22px;
      }
      
      .thumbs button{
        width:60px;
        height:48px;
      }
      
      .details{
        padding:14px;
      }
      
      .review-section{
        padding:18px;
      }
      
      .review-section h3{
        font-size:18px;
      }
      
      .review-textarea{
        height:80px;
      }
      
      .review-card{
        padding:14px;
      }
    }
    
    @media(max-width:600px){
      body{
        padding:10px 8px;
      }
      
      .glass-header{
        padding:8px 12px;
        border-radius:10px;
        margin-bottom:15px;
      }
      
      .header-left{
        gap:8px;
      }
      
      .header-logo{
        height:30px;
      }
      
      .brand-title{
        font-size:14px;
      }
      
      .container{
        gap:15px;
      }
      
      .hero{
        min-height:180px;
        border-radius:10px;
      }
      
      .hero img{
        max-height:280px;
      }
      
      .thumbs{
        gap:6px;
      }
      
      .thumbs button{
        width:50px;
        height:40px;
        border-radius:6px;
      }
      
      .meta{
        padding:14px;
        border-radius:10px;
        gap:10px;
      }
      
      .brand-row img{
        height:28px;
      }
      
      .title{
        font-size:16px;
      }
      
      .subline{
        font-size:12px;
      }
      
      .price-row{
        flex-wrap:wrap;
        gap:8px;
      }
      
      .price{
        font-size:20px;
      }
      
      .stock{
        padding:5px 8px;
        font-size:11px;
      }
      
      .delivery-box{
        padding:8px 10px;
        border-radius:10px;
      }
      
      .free-delivery{
        font-size:13px;
      }
      
      .delivery-date{
        font-size:12px;
      }
      
      .rating{
        flex-wrap:wrap;
        gap:6px;
      }
      
      .stars{
        gap:2px;
      }
      
      .star{
        font-size:16px;
      }
      
      #ratingText{
        font-size:12px;
      }
      
      .qty-row{
        flex-wrap:wrap;
        gap:8px;
      }
      
      .qty button{
        padding:8px 10px;
      }
      
      .qty input{
        width:45px;
        padding:6px;
        font-size:14px;
      }
      
      .cta{
        flex-direction:column;
      }
      
      .btn{
        padding:10px 14px;
        font-size:13px;
      }
      
      .btn.cart{
        width:auto;
        text-align:center;
        min-width:180px;
      }
      
      #backBtn{
        width:100%;
        text-align:center;
      }
      
      .details{
        padding:12px;
        border-radius:10px;
        margin-top:12px;
      }
      
      .details h4{
        font-size:14px;
      }
      
      .specs td{
        padding:6px 8px;
        font-size:12px;
      }
      
      .review-section{
        padding:14px;
        margin-top:25px;
        border-radius:12px;
      }
      
      .review-section h3{
        font-size:16px;
        margin-bottom:12px;
      }
      
      .review-textarea{
        height:70px;
        padding:10px;
        font-size:14px;
      }
      
      .review-submit-btn{
        padding:8px 14px;
        font-size:13px;
      }
      
      #reviewRating{
        padding:6px;
        font-size:13px;
      }
      
      .review-card{
        padding:12px;
        margin-bottom:10px;
        border-radius:10px;
      }
      
      .review-user{
        font-size:14px;
      }
      
      .review-message{
        font-size:13px;
        line-height:1.4;
        margin:5px 0 8px;
      }
      
      .review-stars{
        font-size:14px;
      }
      
      .review-date{
        font-size:11px;
      }
      
      .related{
        gap:8px;
      }
      
      .rel-card{
        min-width:140px;
        padding:8px;
      }
      
      .rel-card img{
        width:110px;
        height:70px;
      }
      
      #toast{
        padding:12px 18px;
        font-size:14px;
        width:90%;
        max-width:280px;
      }
      
      .popup-overlay,
      .modal-overlay{
        padding:15px;
      }
      
      .popup-box,
      .modal{
        width:95%;
        padding:18px;
      }
    }
    
    @media(max-width:400px){
      .brand-title{
        display:none;
      }
      
      .title{
        font-size:15px;
      }
      
      .price{
        font-size:18px;
      }
      
      .btn{
        padding:9px 12px;
        font-size:12px;
      }
    }
    @media (max-width: 768px) {
  .container {
    grid-template-columns: 1fr !important;
  }

  .meta {
    position: relative;
    top: 0;
  }
}
/* ===============================
   RESPONSIVE BREAKPOINT SYSTEM
================================ */

/* Tablets */
@media (max-width: 992px) {
  body {
    padding: 15px;
  }

  .container,
  .box {
    padding: 20px;
  }
}

/* Mobiles */
@media (max-width: 600px) {
  body {
    padding: 10px;
  }

  h1 { font-size: 20px; }
  h2 { font-size: 18px; }
  h3 { font-size: 16px; }

  p, span {
    font-size: 14px;
  }
}

/* Small phones */
@media (max-width: 420px) {
  h1 { font-size: 18px; }
  h2 { font-size: 16px; }
  p  { font-size: 13px; }
}
/* ===============================
   GLOBAL RESPONSIVE RESET
================================ */

* {
  box-sizing: border-box;
  font-size: 18px;
  max-width: 100%;
}

html, body {
  width: 100%;
  overflow-x: hidden;
}

/* Images auto resize */
img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Buttons full width on mobile */
@media (max-width: 600px) {
  button,
  .btn {
    width: 100%;
  }
}
/* ===============================
   PRODUCT VIEW PAGE LAYOUT FIX
   =============================== */

/* Make product main section flexible */
.product-view-container {
  display: flex;
  flex-direction: column;
}

/* Move title + price + stock upward */
.product-title,
.product-price,
.product-stock,
.delivery-card {
  order: 1;
  margin-top: 8px;
}

/* Quantity + add to cart stays middle */
.product-actions {
  order: 2;
  margin-top: 15px;
}

/* Push description & specs downward */
.product-description,
.product-specifications {
  order: 3;
  margin-top: 25px;
}

/* Better spacing for description box */
.product-description {
  padding-top: 15px;
  border-top: 1px solid #e6e6e6;
}

/* Specifications clean look */
.product-specifications {
  margin-top: 20px;
  padding-top: 10px;
}
/* ===============================
   PRODUCT VIEW HEADER (PREMIUM)
================================ */

.product-header {
  max-width: 1150px;
  margin: 0 auto 18px;

  display: flex;
  align-items: center;
  justify-content: space-between;

  padding: 12px 18px;
  border-radius: 16px;

  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(14px);

  box-shadow: 0 10px 28px rgba(0, 0, 0, 0.10);
}


/* left group */
.header-left {
  display: flex;
  align-items: center;
  gap: 14px;
}

/* back arrow */
.back-btn {
  border: none;
  background: #f3f4f6;
  padding: 8px 12px;
  border-radius: 10px;
  cursor: pointer;
  font-size: 18px;
  font-weight: 700;
}

.back-btn:hover {
  background: #e5e7eb;
}

/* brand link */
.brand-link {
  display: flex;
  align-items: center;
  gap: 12px;
  text-decoration: none;
  color: inherit;
}

.header-logo {
  height: 42px;
  border-radius: 8px;
}

/* brand text */
.brand-text {
  display: flex;
  flex-direction: column;
}

.brand-name {
  font-size: 18px;
  font-weight: 800;
}

.brand-sub {
  font-size: 12px;
  color: #6b7280;
}

/* right badge */
.header-right {
  font-size: 13px;
}

.trust-badge {
  background: #ecfdf5;
  color: #065f46;
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 700;
  border: 1px solid #bbf7d0;
}

/* ===============================
   MOBILE HEADER
================================ */

@media (max-width: 600px) {
  .product-header {
    padding: 10px 12px;
    border-radius: 12px;
  }

  .header-logo {
    height: 34px;
  }

  .brand-name {
    font-size: 15px;
  }

  .brand-sub {
    font-size: 11px;
  }

  .trust-badge {
    font-size: 11px;
    padding: 4px 8px;
  }
}
.page-wrapper {
  max-width: 1150px;
  margin: 0 auto;
}
/* ===============================
   PRODUCT DESCRIPTION TEXT
================================ */

.product-description p {
  font-size: 15px;
  line-height: 1.7;
  color: #374151;
}

/* ===============================
   SPECIFICATIONS
================================ */

.specs-row {
  display: grid;
  grid-template-columns: 220px 1fr;
  padding: 12px 0;
  border-bottom: 1px dashed #e5e7eb;
}

.specs-label {
  font-size: 15px;
  color: #6b7280;
}

.specs-value {
  font-size: 15px;
  color: #111827;
  font-weight: 500;
}

  </style>
</head>
<body>
<div class="page-wrapper">
<header class="glass-header">
  <div class="header-left">

    <!-- LOGO CLICK ‚Üí HOME -->
    <a href="/" style="display:flex;align-items:center;gap:12px;text-decoration:none;color:inherit;">

      <img 
        src="https://th.bing.com/th/id/R.35647c0cec927537fa43ed1836a446c2?rik=7Lzu71WwPczowA&riu=http%3a%2f%2fpluspng.com%2fimg-png%2fhyundai-logo-png-hyundai-car-logo-png-brand-image-1749.png&ehk=UI8O%2bS7ci5lpalKI9Rf1u%2bMYvCgw%2bVwAeupMAcxmk2g%3d&risl=&pid=ImgRaw&r=0"
        class="header-logo"
        alt="AKC AUTO PARTS"
        style="cursor:pointer;"
      >

      <span class="brand-title" style="cursor:pointer;">
        AKC AUTO PARTS
      </span>
    </a>
</header>


<main class="container">

  <!-- LEFT: media + details -->
  <section class="media">
    <div class="hero" id="heroWrap">
      <img id="heroImg" src="https://via.placeholder.com/600x420?text=Loading..." alt="Product image">
    </div>

    <div class="thumbs" id="thumbs"></div>

  <!-- RIGHT: meta & actions -->
  <aside class="meta">
    <div class="brand-row">
      <img id="brandLogo" src="https://static.vecteezy.com/system/resources/previews/015/482/738/original/akc-letter-logo-design-on-white-background-akc-creative-initials-circle-logo-concept-akc-letter-design-vector.jpg" alt="Brand" />
      <div style="display:flex;flex-direction:column;">
        <div class="subline" id="manufacturer"><%= product.manufacturer%></div>
        <div style="font-size:13px;color:var(--muted)" id="prodId"><%= product.ID %></div>
      </div>
    </div>

    <h1 class="title" id="prodTitle"><%= product.name %></h1>
    <div class="price-row">
      <div>
        <div class="price-row">
  <div>
    <% if (product.discount > 0) { %>

      <div class="price">
        ‚Çπ<%= product.finalPrice %>
      </div>

      <div class="old-price">
        ‚Çπ<%= product.price %>
      </div>

      <div style="
        margin-top:6px;
        background:#16a34a;
        color:white;
        padding:4px 10px;
        font-size:12px;
        font-weight:700;
        border-radius:6px;
        display:inline-block;
      ">
        <%= product.discount %>% OFF
      </div>

    <% } else { %>

      <div class="price">
        ‚Çπ<%= product.price %>
      </div>

    <% } %>
  </div>
 </div>

      </div>
      <div style="margin-left:auto">
          <% 
    let stockClass = "red";
    if (product.stock === "In Stock") stockClass = "green";
    else if (product.stock === "Limited") stockClass = "orange";
  %>

  <div class="stock <%= stockClass %>">
    <%= product.stock %>
  </div>
      </div>
    </div>
    <div class="delivery-box">
  <p class="free-delivery">üöö Free Delivery Available</p>
  <p class="delivery-date">Delivery by: <span id="etaDate"></span></p>
</div>


    <div class="rating">
      <div class="stars" id="stars">
        <!-- interactive stars -->
      </div>
      <small id="ratingText" style="color:var(--muted)">4.6 ‚Ä¢ 132 reviews</small>
    </div>

    <div class="qty-row">
      <div style="color:var(--muted); font-size:14px">Quantity</div>
      <div class="qty" style="margin-left:8px">
        <button type="button" onclick="decreaseQty()">‚àí</button>
        <input id="qtyInput" type="number" value="1" min="1" />
        <button type="button" onclick="increaseQty()">+</button>
      </div>
    </div>

    <div class="cta">
      <button
  class="btn cart"
  id="addCartBtn"
  onclick="addToCart('<%= product.id %>', document.getElementById('qtyInput').value)"
>
  Add to Cart
</button>

    </div>

    <div style="display:flex; gap:10px; margin-top:8px; align-items:center;">
      <button class="btn" style="background:transparent; border:1px dashed #e6e9ef; padding:8px 10px" id="backBtn">‚Üê Back to shop</button>
      <div style="margin-left:auto; color:var(--muted); font-size:13px">Share:
        <a href="#" id="shareFb" style="margin-left:8px; text-decoration:none">FB</a>
        <a href="#" id="shareTw" style="margin-left:6px; text-decoration:none">TW</a>
      </div>
    </div>

    <div class="related" id="related"></div>

  </aside>
    <div class="details" id="descBlock">
      <h4>Product description</h4>
      <div id="prodDescription" style="color:var(--muted); line-height:1.5;">
        Loading description...
      </div>

      <h4 style="margin-top:12px">Specifications</h4>
      <table class="specs" id="specTable">
        <!-- rows populated by JS -->
      </table>
    </div>
  </section>

</main>
</div>
<!-- toast -->
<div id="toast" class="toast">Added to cart</div>


<!-- sign-in modal -->
<div id="signModal" class="modal-overlay">
  <div class="modal">
    <h3>Sign in required</h3>
    <p>You need to sign in before buying. Would you like to sign in now?</p>
    <div class="actions">
      <button class="btn cart" onclick="closeModal()">No, stay</button>
      <button class="btn buy" onclick="goSignin()">Yes, take me to sign in</button>
    </div>
  </div>
</div>
<div class="details" style="margin-top:20px;">
  <h4>Customer Reviews</h4>

  <!-- Review Form -->
  <% if (session && session.user) { %>
    <div style="margin-bottom:15px;">
      <textarea id="reviewMessage" placeholder="Write your review..." style="width:100%;height:70px;padding:10px;border-radius:8px;border:1px solid #ccc;"></textarea>
      
      <div style="margin-top:8px;">
        Rating:
        <select id="reviewRating">
          <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
          <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option>
          <option value="3">‚≠ê‚≠ê‚≠ê</option>
          <option value="2">‚≠ê‚≠ê</option>
          <option value="1">‚≠ê</option>
        </select>

        <button class="btn buy" onclick="submitReview()" style="margin-left:10px;">Submit</button>
      </div>
    </div>
  <% } else { %>
    <p style="color:#666">Please <a href="/signin">sign in</a> to write a review.</p>
  <% } %>

  <!-- Reviews List -->
  <div id="reviewList" style="margin-top:15px;">

  </div>
</div>
<script>
  const product = <%- JSON.stringify(product) %>;
   const productId = product.id; // ‚úÖ SINGLE SOURCE
</script>

<script>
/* =========================
   Product view page script
   ========================= */

const LS_CART_KEY = 'akc_cart_v1';

/* (1) ‚Äî Product data (same arrays as your shop page).
   Keep it in sync with your other pages; used locally here. */


/* helpers */
function qs(name){ return new URLSearchParams(location.search).get(name); }
function numberWithCommas(x){ return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); }
function loadCart(){ try{ return JSON.parse(localStorage.getItem(LS_CART_KEY)) || []; }catch(e){ return []; } }
function saveCart(c){ localStorage.setItem(LS_CART_KEY, JSON.stringify(c)); showToast('Cart updated'); updateCartCount(); }
function updateCartCount(){ /* if you have a global badge, update here */ }

/* is user signed in? provided by server */
const isLoggedIn = "<%= session && session.user ? 'true' : 'false' %>";

console.log("URL ID:", productId);
console.log("FOUND PRODUCT:", product);


if (!product) {
  document.body.innerHTML = '<div style="max-width:900px;margin:40px auto;padding:18px;background:#fff;border-radius:12px;text-align:center">Product not found ‚Äî <a href="/">Back to shop</a></div>';
} else {
  // Populate UI
  const heroImg = document.getElementById('heroImg');
  const thumbs = document.getElementById('thumbs');
  const prodTitle = document.getElementById('prodTitle');
  const manufacturer = document.getElementById('manufacturer');
  const prodIdEl = document.getElementById('prodId');
  const prodPrice = document.getElementById('prodPrice');
  const prodOldPrice = document.getElementById('prodOldPrice');
  const stockBadge = document.getElementById('stockBadge');
  const prodDescription = document.getElementById('prodDescription');
  const specTable = document.getElementById('specTable');
  const related = document.getElementById('related');

  // main hero
  heroImg.src = product.img;
  heroImg.alt = product.name;

  // thumbs: we'll include up to 4 thumbnails (reusing product.img + category placeholders)
  const thumbsList = [product.img];
  // add a few category images for visual variety
  thumbsList.push(product.img.replace('600x420', '400x300') || product.img);
  thumbsList.push('https://via.placeholder.com/400x240?text=Spec+View');
  thumbsList.push('https://via.placeholder.com/400x240?text=Close+up');

  thumbsList.slice(0,4).forEach((src, i) => {
    const btn = document.createElement('button');
    const img = document.createElement('img');
    img.src = src;
    img.alt = product.name + ' thumb ' + (i+1);
    btn.appendChild(img);
    btn.addEventListener('click', ()=> {
      heroImg.src = src;
      // indicate active thumb
      document.querySelectorAll('.thumbs button').forEach(b=>b.style.boxShadow='none');
      btn.style.boxShadow = '0 6px 18px rgba(15,23,42,0.12)';
    });
    thumbs.appendChild(btn);
  });

  // meta
  prodTitle.textContent = product.name;
  manufacturer.textContent = product.manufacturer;
  prodIdEl.textContent = product.id;
  prodPrice.textContent = "‚Çπ " + formatPrice(product.finalPrice || product.price);
  prodOldPrice.textContent = ''; // you can set product.oldPrice if available
// ---------- DESCRIPTION ----------
document.addEventListener("DOMContentLoaded", () => {

  const prodDescription = document.getElementById("prodDescription");
  const specTable = document.getElementById("specTable");

  if (!product) {
    console.error("Product not found");
    return;
  }

  // ---------- DESCRIPTION ----------
  prodDescription.textContent =
    product.description || "No description available.";

  // ---------- SPECIFICATIONS ----------
  specTable.innerHTML = "";

  if (product.specs && Object.keys(product.specs).length > 0) {
    for (const key in product.specs) {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${key}</td>
        <td>${product.specs[key]}</td>
      `;
      specTable.appendChild(tr);
    }
  } else {
    specTable.innerHTML = `
      <tr>
        <td colspan="2" style="color:#6b7280">
          No specifications available.
        </td>
      </tr>
    `;
  }

});

  // stars (UI only)
  const starsWrap = document.getElementById('stars');
  const rating = 4.6; // can be dynamic
  for (let i=1;i<=5;i++){
    const sp = document.createElement('span');
    sp.className = 'star';
    sp.innerHTML = (i <= Math.round(rating) ? '‚òÖ' : '‚òÜ');
    sp.addEventListener('mouseenter', ()=> { /* optional hover */});
    starsWrap.appendChild(sp);
  }

  // related (simple: same category)
  const relatedList = products.filter(p => p.category === product.category && p.id !== product.id).slice(0,6);
  relatedList.forEach(r => {
    const c = document.createElement('div');
    c.className = 'rel-card';
    c.innerHTML = `<img src="${r.img}" alt="${r.name}"><div style="font-weight:700;font-size:14px;">${r.name}</div><div style="color:var(--muted);font-size:13px">${r.manufacturer}</div><button style="margin-top:8px;padding:8px 10px;border-radius:8px;border:1px solid #e6e9ef;background:#fff;cursor:pointer" onclick="location.href='/product?id=${r.id}'">View</button>`;
    related.appendChild(c);
  });

  // Add event listeners for buttons
  document.getElementById('backBtn').addEventListener('click', ()=> location.href = '/');
  document.getElementById('buyNowBtn').addEventListener('click', ()=> {
    if (isLoggedIn !== 'true') {
      // show sign-in modal
      document.getElementById('signModal').style.display = 'flex';
      return;
    }
    // buy flow: add to cart and go to registration/checkout
    const qty = Math.max(1, Number(document.getElementById('qtyInput').value || 1));
    addToCart(product.id, qty);
    location.href = '/registration';
  });

}
function formatPrice(value) {
  return Number(value).toFixed(2);
}

/* qty helpers */
function increaseQty(){ const el = document.getElementById('qtyInput'); el.value = Number(el.value || 1) + 1; }
function decreaseQty(){ const el = document.getElementById('qtyInput'); el.value = Math.max(1, Number(el.value || 1) - 1); }

function addToCart(productId, qty) {
  qty = Number(qty) || 1;

  let cart = JSON.parse(localStorage.getItem("akc_cart_v1")) || [];

  const price = product.finalPrice || product.price;

  const existing = cart.find(i => i.id === productId);

  if (existing) {
    existing.qty += qty;
  } else {
    cart.push({
      id: productId,
      name: product.name,
      price: price,
      qty: qty,
      img: `/images/products/${productId}.jpg`
    });
  }

  localStorage.setItem("akc_cart_v1", JSON.stringify(cart));

  document.getElementById("toast").classList.add("show");
  setTimeout(() => {
    document.getElementById("toast").classList.remove("show");
  }, 1200);
}

/* toast */
function showToast(message) {
  const toast = document.getElementById("toast");
  toast.textContent = message;
  toast.classList.add("show");

  // Hide after 2 seconds
  setTimeout(() => {
    toast.classList.remove("show");
  }, 2000);
}


/* sign modal */
function closeModal(){ document.getElementById('signModal').style.display = 'none'; }
function goSignin(){ location.href = '/signin'; }

/* share links (basic) */
document.getElementById('shareFb').addEventListener('click', (e)=> {
  e.preventDefault();
  const u = encodeURIComponent(location.href);
  window.open(`https://www.facebook.com/sharer/sharer.php?u=${u}`, '_blank');
});
document.getElementById('shareTw').addEventListener('click', (e)=> {
  e.preventDefault();
  const u = encodeURIComponent(location.href); const t = encodeURIComponent(document.title);
  window.open(`https://twitter.com/intent/tweet?url=${u}&text=${t}`, '_blank');
});

</script>
<script>
function loadRating() {
  fetch(`/rating/${productId}`)
    .then(res => res.json())
    .then(data => {
      const avg = Number(data.avg);
      const count = data.count;

      const ratingText = document.getElementById("ratingText");
      const starsWrap = document.getElementById("stars");

      if (count === 0) {
        ratingText.textContent = "No reviews yet";
        starsWrap.innerHTML = "‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ";
        return;
      }

      ratingText.textContent = `${avg} ‚Ä¢ ${count} reviews`;

      starsWrap.innerHTML =
        "‚òÖ".repeat(Math.round(avg)) +
        "‚òÜ".repeat(5 - Math.round(avg));
    });
}

loadRating();
function loadReviews() {
  fetch(`/reviews/${productId}`)
    .then(res => res.json())
    .then(data => {
      const box = document.getElementById("reviewList");
      box.innerHTML = "";

      if (data.length === 0) {
        box.innerHTML = "<p>No reviews yet.</p>";
        return;
      }

      data.forEach(r => {
        const div = document.createElement("div");
        div.style.padding = "12px";
        div.style.background = "#fff";
        div.style.borderRadius = "10px";
        div.style.marginBottom = "10px";
        div.style.boxShadow = "0 4px 10px rgba(0,0,0,0.05)";

        div.innerHTML = `
          <div style="font-weight:700">${r.userName}</div>
          <div style="color:#f59e0b">${"‚òÖ".repeat(r.rating)}</div>
          <p>${r.message}</p>
          <small style="color:#666">${new Date(r.date).toLocaleString()}</small>
        `;

        box.appendChild(div);
      });
    });
}

loadReviews();
function submitReview() {
  const message = document.getElementById("reviewMessage").value.trim();
  const rating = document.getElementById("reviewRating").value;

  fetch("/review", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      productId,
      message,
      rating
    })
  })
    .then(res => res.json())
    .then(data => {
      if (data.success) {
        document.getElementById("reviewMessage").value = "";
        loadReviews();
        loadRating();
      } 
    });
}
</script>
<script>
  // Brand logo map
const brandLogos = {
  "Hyundai": "https://th.bing.com/th/id/R.35647c0cec927537fa43ed1836a446c2?rik=7Lzu71WwPczowA&riu=http%3a%2f%2fpluspng.com%2fimg-png%2fhyundai-logo-png-hyundai-car-logo-png-brand-image-1749.png&ehk=UI8O%2bS7ci5lpalKI9Rf1u%2bMYvCgw%2bVwAeupMAcxmk2g%3d&risl=&pid=ImgRaw&r=0",
  "Tata": "https://upload.wikimedia.org/wikipedia/commons/1/1d/Tata_logo.svg",
  "Bajaj": "https://upload.wikimedia.org/wikipedia/commons/5/55/Bajaj_Logo.svg"
};
const brandLogo = document.getElementById('brandLogo');
const manufacturer = document.getElementById('manufacturer');

</script>
<script>
  // --- Replace your old getDeliveryDate() with this ---
function getDeliveryDate(daysAhead = 6) {
  const now = new Date();

  // compute ETA = today + daysAhead
  const eta = new Date(now);
  eta.setDate(eta.getDate() + Number(daysAhead));

  // friendly text
  // If daysAhead === 1 -> "Tomorrow"
  // If daysAhead === 0 -> "Today"
  // Else -> weekday + date
  let human;
  if (daysAhead === 0) {
    human = "Today";
  } else if (daysAhead === 1) {
    human = "Tomorrow";
  } else {
    // e.g. "Mon, Dec 16 2025 (in 4 days)"
    const opts = { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' };
    human = `${eta.toLocaleDateString(undefined, opts)} (in ${daysAhead} days)`;
  }

  const el = document.getElementById("etaDate");
  if (el) el.textContent = human;

  // Optionally return the date object if needed
  return eta;
}

// call it with 4 days
getDeliveryDate(6);

</script>
<script>
  const backBtn = document.getElementById("backBtn");

  if (backBtn) {
    backBtn.onclick = () => {
      window.location.href = "/";
    };
  }
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {

  const prodDescription = document.getElementById("prodDescription");
  const specTable = document.getElementById("specTable");

  console.log("DESC ELEMENT:", prodDescription);
  console.log("SPEC ELEMENT:", specTable);

  if (!prodDescription || !specTable) {
    console.error("Description or spec element not found in DOM");
    return;
  }

  if (!product) {
    prodDescription.textContent = "Product data not found.";
    return;
  }

  // ‚úÖ DESCRIPTION
  prodDescription.textContent =
    product.description || "No description available.";

  // ‚úÖ SPECIFICATIONS
  specTable.innerHTML = "";

  if (product.specs && Object.keys(product.specs).length > 0) {
    for (const key in product.specs) {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${key}</td>
        <td>${product.specs[key]}</td>
      `;
      specTable.appendChild(tr);
    }
  } else {
    specTable.innerHTML = `
      <tr>
        <td colspan="2" style="color:#6b7280">
          No specifications available.
        </td>
      </tr>
    `;
  }

});
</script>
<script>
  // ================================
// RELATED PRODUCTS (FINAL FIX)
// ================================

const relatedBox = document.getElementById("related");

if (relatedBox && product) {

  relatedBox.innerHTML = "";

  const relatedItems = products
    .filter(p =>
      p.category === product.category &&
      p.id !== product.id
    )
    .slice(0, 8);

  if (relatedItems.length === 0) {
    relatedBox.innerHTML = `
      <div style="color:#6b7280;font-size:14px;">
        No related products found.
      </div>
    `;
  }

  relatedItems.forEach(item => {
    const card = document.createElement("div");
    card.className = "rel-card";

    card.innerHTML = `
      <img src="${item.img}" alt="${item.name}">
      <div style="font-size:14px;font-weight:700;text-align:center">
        ${item.name}
      </div>
      <div style="color:#6b7280;font-size:13px">
        ‚Çπ${item.price}
      </div>

      <button
        style="
          margin-top:6px;
          padding:6px 12px;
          border-radius:8px;
          border:1px solid #e5e7eb;
          background:#fff;
          cursor:pointer;
          font-weight:600;
        "
        onclick="location.href='/product?id=${item.id}'"
      >
        View
      </button>
    `;

    relatedBox.appendChild(card);
  });
}

</script>
<script>
document.addEventListener("DOMContentLoaded", () => {

  // IMAGE
  document.getElementById("heroImg").src =
    `/images/products/${product.id}.jpg`;

  // TEXT
  document.getElementById("prodTitle").textContent = product.name;
  document.getElementById("manufacturer").textContent = product.manufacturer || "Hyundai";
  document.getElementById("prodId").textContent = product.id;

});
</script>
<script>
document.addEventListener("DOMContentLoaded", () => {

  if (!product) return;

  // =====================
  // PRODUCT DESCRIPTION
  // =====================
  const descBox = document.getElementById("prodDescription");

  descBox.innerHTML = `
    Genuine <b>${product.name}</b> suitable for
    <b>${product.manufacturer}</b> vehicles.
    High quality auto part with perfect fitting and durability.
  `;

  // =====================
  // PRODUCT SPECIFICATIONS
  // =====================
  const specTable = document.getElementById("specTable");

  specTable.innerHTML = `
    <tr>
      <td>Brand</td>
      <td>${product.manufacturer}</td>
    </tr>
    <tr>
      <td>Category</td>
      <td>${product.category}</td>
    </tr>
    <tr>
      <td>Part Number</td>
      <td>${product.id}</td>
    </tr>
    <tr>
      <td>Stock Status</td>
      <td>${product.stock}</td>
    </tr>
  `;
});
</script>

</body>
</html>
